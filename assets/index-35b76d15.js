import{u as f}from"./index-02be81dc.js";await Promise.all([window.__OSL.import("xdp/ui/button"),window.__OSL.import("xdp/ui/form"),window.__OSL.import("xdp/ui/input"),window.__OSL.import("vue")]);const{Button:x}=window.__OSL.getModule("xdp/ui/button"),{FormItem:v}=window.__OSL.getModule("xdp/ui/form"),{Form:S}=window.__OSL.getModule("xdp/ui/form"),{InputPassword:b}=window.__OSL.getModule("xdp/ui/input"),{Input:L}=window.__OSL.getModule("xdp/ui/input"),{reactive:O}=window.__OSL.getModule("vue"),{resolveComponent:a,createVNode:l,withCtx:u,createTextVNode:c,createElementVNode:M,openBlock:V,createBlock:y}=window.__OSL.getModule("vue"),B={class:"btn"},$={components:{XForm:S,XFormItem:v,XInput:L,XInputPassword:b,XButton:x}},k=Object.assign($,{__name:"LoginForm",props:{loading:Boolean},emits:["close","submit"],setup(m,{emit:_}){const s={account:[{required:!0,message:"账户名必填"},{minLength:2,message:"至少需要两个字"}],password:[{required:!0,message:"密码必填",trigger:["change","input"]},{minLength:5,message:"至少需要5字符",trigger:["change","input"]}]},o=O({account:"admin",password:"666666"}),r=({values:t,errors:e})=>{console.log("values:",t,`
errors:`,e),!e&&_("submit",t)};return(t,e)=>{const n=a("x-input"),i=a("x-form-item"),w=a("x-input-password"),p=a("x-button"),g=a("x-form");return V(),y(g,{class:"login-form",rules:s,model:o,"label-width":0,ref:"formRef",onSubmit:r},{default:u(()=>[l(i,{field:"account"},{default:u(()=>[l(n,{modelValue:o.account,"onUpdate:modelValue":e[0]||(e[0]=d=>o.account=d),"allow-clear":"",placeholder:"请输入账户名"},null,8,["modelValue"])]),_:1}),l(i,{field:"password"},{default:u(()=>[l(w,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.password=d),"allow-clear":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),M("div",B,[l(p,{type:"primary","html-type":"submit"},{default:u(()=>[c("登录")]),_:1}),l(p,{onClick:e[2]||(e[2]=d=>t.$refs.formRef.resetFields())},{default:u(()=>[c("清除")]),_:1})])]),_:1},8,["model"])}}});await Promise.all([window.__OSL.import("xdp/ui/message"),window.__OSL.import("xdp/ui/modal"),window.__OSL.import("vue")]);const{Message:C}=window.__OSL.getModule("xdp/ui/message"),{Modal:N}=window.__OSL.getModule("xdp/ui/modal"),{ref:h}=window.__OSL.getModule("vue"),{createVNode:F,resolveComponent:I,normalizeStyle:X,withCtx:P,openBlock:U,createBlock:j}=window.__OSL.getModule("vue"),{useModel:q}=window.__OSL.getModule("vue"),z={components:{XModal:N}},R=Object.assign(z,{__name:"index",props:{modelValue:{}},emits:["update:modelValue"],setup(m){const{login:_}=f(),s=h(!1),o=q(m,"modelValue");async function r({account:t,password:e}){s.value=!0;try{let n=await _({account:t,password:e});if(console.log("x onSubmit login ",n),!n)return;C.success(`登录成功 - ${t}`),o.value=!1}finally{s.value=!1}}return(t,e)=>{const n=I("x-modal");return U(),j(n,{title:"登录","title-align":"left",visible:o.value,"onUpdate:visible":e[1]||(e[1]=i=>o.value=i),style:X(t.style),class:"app-login",closable:!1,footer:!1,"mask-closable":!1,width:"400px",draggable:""},{default:P(()=>[F(k,{onSubmit:r,onClose:e[0]||(e[0]=i=>o.value=!1),loading:s.value},null,8,["loading"])]),_:1},8,["visible","style"])}}});export{R as default};
